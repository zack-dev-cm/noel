# Задача 1.1: Скелет монорепо, базовая конфигурация и UI-макет

## Связь с юзер-кейсами
- UC-01: WebApp onboarding and consent
- UC-02: Observe a live public session

## Цель задачи
Создать основу проекта (web/server/worker/shared), включить базовую конфигурацию TypeScript и Vite, поднять минимальный API и WebSocket с заглушками, а также реализовать статический UI по `mocks.md` для первых E2E.

## Описание изменений

### Новые файлы
- `package.json` — корневые скрипты (dev/build/test) и workspaces.
- `tsconfig.base.json` — базовый TS конфиг для всех пакетов.
- `apps/web/` — React + Vite мини-апп.
- `apps/server/` — Express сервер с заглушками API/WS.
- `apps/worker/` — заглушка воркера.
- `packages/shared/` — общие типы и константы.
- `playwright.config.ts` — базовая конфигурация e2e (headed, screenshots).

### Изменения в существующих файлах
- Нет (новый проект).

### Детали по компонентам

#### `apps/web/src/App.tsx`
- Экранная структура:
  - Dashboard (Live Session), Logs, Stars, About.
  - Нижняя навигация с 4 табами.
- Визуальный стиль:
  - Градиентный фон, карточки, цветные потоки (amber/cyan).
  - Метки и кнопки согласно `mocks.md`.
- Логика:
  - Локальные мок-данные для потоков и карточек.
  - Заглушка `WebSocket` клиента (пока без подключения).

#### `apps/server/src/index.ts`
- Поднять Express сервер.
- Добавить `/healthz` и `/api/meta` (заглушки).
- Добавить WS endpoint `/ws/stream` с заглушечной отправкой событий.

#### `apps/worker/src/index.ts`
- Заглушка процесса (логирует запуск, не запускает loop).

#### `packages/shared/src/types.ts`
- Типы: `StreamEvent`, `Session`, `PaymentInvoice`, `Telemetry`.

### Интеграция компонентов
- WebApp читает `VITE_API_BASE_URL` и подключается к `/api/meta`.
- WS endpoint возвращает 2-3 заглушечных сообщения.

## Тест-кейсы

### End-to-end тесты
1. **TC-E2E-01:** Открытие главного экрана
   - Входные данные: `http://localhost:<web>`
   - Ожидаемый результат: видны заголовок Dashboard, карточки потоков и нижняя навигация.
   - Примечание: На этапе заглушек ожидается статическое содержимое.

### Модульные тесты
1. **TC-UNIT-01:** Проверка рендеринга `App` (React Testing Library)
   - Проверить наличие ключевых элементов UI.

### Регрессионные тесты
- `npx playwright test --headed`

## Критерии приёмки
- [ ] Создана структура `apps/` и `packages/`.
- [ ] WebApp стартует и отображает UI по мокам.
- [ ] API отвечает на `/healthz` и `/api/meta`.
- [ ] WS endpoint отдает заглушечные события.
- [ ] Базовый E2E проходит (c заглушками).

## Примечания
- UI должен соответствовать стилю `mocks.md` и изображений из репозитория.
- Все значения в заглушках — статические.
